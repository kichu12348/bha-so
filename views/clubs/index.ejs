<%- include('../partials/header') %>

<div class="max-w-6xl mx-auto">
  <div class="flex justify-between items-center mb-8">
    <h1 class="text-4xl font-bold text-gray-800">All Clubs</h1>
    <% if (user && user.role === 'admin') { %>
      <a href="/clubs/new" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">
        + Create New Club
      </a>
    <% } %>
  </div>

  <% if (clubs.length === 0) { %>
    <div class="bg-white shadow-md rounded-lg p-8 text-center">
      <p class="text-gray-600 text-lg">No clubs available yet.</p>
      <% if (user && user.role === 'admin') { %>
        <a href="/clubs/new" class="text-blue-500 hover:text-blue-700 mt-2 inline-block">Create the first club</a>
      <% } %>
    </div>
  <% } else { %>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <% clubs.forEach(club => { %>
        <div class="bg-white shadow-md rounded-lg p-6 hover:shadow-xl transition-shadow">
          <h2 class="text-2xl font-bold text-gray-800 mb-2"><%= club.name %></h2>
          <p class="text-gray-600 mb-4"><%= club.description || 'No description available' %></p>
          
          <div class="flex justify-between items-center">
            <a href="/clubs/<%= club.club_id %>" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
              View Details
            </a>
            
            <% if (user && user.role === 'admin') { %>
              <form action="/clubs/<%= club.club_id %>?_method=DELETE" method="POST" class="inline">
                <button type="submit" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded" onclick="return confirm('Are you sure you want to delete this club?')">
                  Delete
                </button>
              </form>
            <% } %>
          </div>
        </div>
      <% }); %>
    </div>
  <% } %>
</div>

<%- include('../partials/footer') %>
